(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{100:function(e,t,a){e.exports={commentform:"comment_commentform__v8LeK",commentInput:"comment_commentInput__3syT7",commentBtn:"comment_commentBtn__MKQu0"}},101:function(e,t,a){e.exports={replycount:"replyComment_replycount__hZArh",replysection:"replyComment_replysection__2NNsU",counts:"replyComment_counts__4BCn7"}},122:function(e,t,a){e.exports={mainImage:"mainimage_mainImage__3GMip",images:"mainimage_images__3gQKh"}},123:function(e,t,a){e.exports={imageSlider:"productImages_imageSlider__EPgi4",images:"productImages_images__1gZwL"}},148:function(e,t,a){e.exports={app:"app_app__cewju"}},179:function(e,t,a){},18:function(e,t,a){e.exports={nav:"navbar_nav__ND3RC",navbar:"navbar_navbar__1uvuT",menuimg:"navbar_menuimg__pP1V2",rightNav:"navbar_rightNav__1PRy2",logo:"navbar_logo__bFQXX",logoimg:"navbar_logoimg__2nQr2",navimg:"navbar_navimg__12KMz",navhistory:"navbar_navhistory__2B_Iv",mainlogo:"navbar_mainlogo__s90p9",navimgcart:"navbar_navimgcart__10r3M",guide:"navbar_guide__1h90C",response:"navbar_response__338yf"}},224:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(44),s=a.n(r),o=(a(179),a(17)),i=a(6),l=a(14),u=a.n(l),d=a(148),j=a.n(d),m=a(23),b=a(15),p=a(68),g=a.n(p),x=a(21),h=a.n(x),O=[{_id:1,name:"\ub85c\ud22c\uc2a4\uc544\uba54\ub9ac\uce78"},{_id:2,name:"\ub9d0\ucc28\ucfe0\ud0a4"},{_id:3,name:"\ucd08\ucf54\uce69\ucfe0\ud0a4"},{_id:4,name:"\ud074\ub798\uc2dd"},{_id:5,name:"\ud53c\ub0ad\uc2dc\uc5d0"},{_id:6,name:"\uae4c\ub20c\ub808"},{_id:7,name:"\ub9c8\ub4e4\ub80c"}],f=[{_id:0,name:"\ubaa8\ub450",array:[]},{_id:1,name:"~ 5,000\uc6d0",array:[0,5e3]},{_id:2,name:"5,100\uc6d0 ~ 10,000\uc6d0",array:[5100,1e4]},{_id:3,name:"10,100\uc6d0 ~ 15,000\uc6d0",array:[10100,15e3]},{_id:4,name:"15,100\uc6d0 ~ 20,000\uc6d0",array:[15100,2e4]},{_id:5,name:"20,000\uc6d0 \uc774\uc0c1",array:[2e4,15e6]}],_=a(151),v=a.n(_),y=a(293),N=a(294),w=a(275),C=a(276),k=a(295),I=a(286),S=a(277),D=a(292),P=a(91),T=a.n(P),F=a(92),q=a.n(F),B=a(0),E=function(e){var t=e.prices,a=e.handleFilter,c=Object(n.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1];return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(y.a,{sx:{p:0,width:"100%",maxWidth:"70%",bgcolor:"#ffe0e5",borderRadius:"10px"},component:"nav",children:[Object(B.jsxs)(N.a,{onClick:function(){o(!s)},children:[Object(B.jsx)(w.a,{children:Object(B.jsx)(v.a,{})}),Object(B.jsx)(C.a,{primary:"Price"}),s?Object(B.jsx)(T.a,{}):Object(B.jsx)(q.a,{})]}),Object(B.jsx)(k.a,{in:s,timeout:"auto",unmountOnExit:!0,children:Object(B.jsx)(y.a,{component:"div",disablePadding:!0,children:Object(B.jsx)(N.a,{sx:{pl:3},children:Object(B.jsx)(S.a,{onChange:function(e){console.log(e.target.value),a(e.target.value)},row:!0,name:"pricerange",children:t.length>0&&t.map((function(e,t){return Object(B.jsx)(D.a,{control:Object(B.jsx)(I.a,{value:"".concat(e._id)}),label:"".concat(e.name)},t)}))})})})})]})})},A=a(287),R=a(234),U=a(152),L=a.n(U),W=function(e){var t=e.lists,a=e.handleFilter,c=Object(n.useState)([]),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(n.useState)(!1),u=Object(i.a)(l,2),d=u[0],j=u[1];return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(y.a,{sx:{p:0,width:"100%",maxWidth:"70%",bgcolor:"#ffe0e5",borderRadius:"10px",marginRight:"10px"},component:"nav",children:[Object(B.jsxs)(N.a,{onClick:function(){j(!d)},children:[Object(B.jsx)(w.a,{children:Object(B.jsx)(L.a,{})}),Object(B.jsx)(C.a,{primary:"Cookies"}),d?Object(B.jsx)(T.a,{}):Object(B.jsx)(q.a,{})]}),Object(B.jsx)(k.a,{in:d,timeout:"auto",unmountOnExit:!0,children:Object(B.jsx)(y.a,{component:"div",disablePadding:!0,children:Object(B.jsx)(N.a,{sx:{pl:2},children:Object(B.jsx)(R.a,{sx:{display:"flex",flexDirection:"row"},children:function(e){return e.length>0&&e.map((function(e,t){return Object(B.jsx)(D.a,{control:Object(B.jsx)(A.a,{onChange:function(){return function(e){console.log(e);var t=s.indexOf(e);console.log("checkedIndex:",t);var n=Object(b.a)(s);-1===t?n.push(e):n.splice(t,1),console.log("newChecked:",n),o(n),console.log(s),a(n)}(e._id)},checked:-1!==s.indexOf(e),value:"".concat(e.name)}),label:"".concat(e.name)},t)}))}(t)})})})})]})})},z=function(e){var t=e.searchFunction,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],s=c[1];return Object(B.jsx)("input",{placeholder:"Search Your Taste",onChange:function(e){s(e.currentTarget.value),t(e.currentTarget.value)},style:{width:200,fontSize:"16px",border:"1px solid #ffc6d0",height:"25px",paddingLeft:"5px",borderRadius:"5px",background:"#FFF6FF"},value:r})},Q=a(279),M=a(290),V=a(296),K=a(299),G=a(298),Y=a(103),X=a(93),H=a.n(X),J=a(278),Z=a(20),$=function(e){e.userData;var t=e.products;return t&&t.map((function(e,t){return Object(B.jsx)(V.a,{sx:{minWidth:"320px",m:1,background:"#f8ecf8"},children:Object(B.jsxs)(Z.b,{to:"/product/".concat(e._id),children:[Object(B.jsx)(G.a,{component:"img",alt:"".concat(e.productname),height:"140",image:"".concat(e.images[0])}),Object(B.jsx)(K.a,{children:Object(B.jsxs)(J.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(B.jsx)(H.a,{sx:{color:"#dfcdeb"}}),Object(B.jsx)(Y.a,{sx:{ml:1},variant:"body",component:"span",children:e.productname})]})})]})},t)}))},ee=a(122),te=a.n(ee),ae=a(94),ne=a.n(ae),ce=(a(144),a(145),function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1],s=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("api/images/getMainImages").then((function(e){if(e.data.success)return console.log(e.data.arr1),e.data.arr1;console.log("\uc5d0\ub7ec")}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){queueMicrotask(Object(o.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t=e.sent,a=Object.values(t),n=a.splice(0,3),console.log(n),r(n);case 7:case"end":return e.stop()}}),e)}))))}),[r]),Object(B.jsx)("section",{className:te.a.mainImage,children:Object(B.jsx)(ne.a,Object(m.a)(Object(m.a)({},{dots:!0,speed:500,infinite:!0,arrows:!1,autoplay:!0,autoplaySpeed:2e3}),{},{children:c?c.map((function(e,t){return Object(B.jsx)("div",{children:Object(B.jsx)("img",{className:te.a.images,src:"".concat(e),alt:"carousel"})},t)})):""}))})}),re=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(0),l=Object(i.a)(s,2),d=l[0],j=l[1],p=Object(n.useState)(0),x=Object(i.a)(p,2),_=x[0],v=x[1],y=Object(n.useState)({cookies:[],price:[]}),N=Object(i.a)(y,2),w=N[0],C=N[1],k=Object(n.useState)(""),I=Object(i.a)(k,2),S=I[0],D=I[1],P=12,T=Object(n.useCallback)(function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.post("/api/product/products",t).then((function(e){e.data.success?(console.log("[Landingpage]products result:",e.data),t.loadmore?r((function(){return[].concat(Object(b.a)(c),Object(b.a)(e.data.products))})):r((function(){return e.data.products})),v((function(){return e.data.postsize})),console.log(_)):alert("\uc0c1\ud488 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(n.useEffect)((function(){T({skip:d,limit:P})}),[P,d,T]);var F=function(e,t){var a=Object(m.a)({},w);if(a[t]=e,"price"===t){var n=function(e){var t=f,a=[];for(var n in t)t[n]._id===parseInt(e,10)&&(a=t[n].array);return a}(e);a[t]=n}C(a),function(e){T({skip:0,limit:P,filters:e}),j(0)}(a)};return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("section",{className:g.a.mainImages,children:Object(B.jsx)(ce,{})}),Object(B.jsxs)("section",{className:g.a.landingpage,children:[Object(B.jsx)("div",{className:g.a.title,children:Object(B.jsxs)("h2",{children:["Be Happy With Cafe July ",Object(B.jsx)(H.a,{color:"error"})]})}),Object(B.jsxs)(Q.a,{sx:{mt:1,display:"flex",flexDirection:"row",minWidth:"100%",justifyContent:"space-between",marginTop:"10px"},children:[Object(B.jsx)(W,{lists:O,handleFilter:function(e){return F(e,"cookies")}}),Object(B.jsx)(E,{prices:f,handleFilter:function(e){return F(e,"price")}})]}),Object(B.jsx)("section",{className:g.a.searchInput,children:Object(B.jsx)(z,{searchFunction:function(e){var t={skip:0,limit:P,filters:w,searchValue:e};j(0),D(e),console.log(S),T(t)}})}),Object(B.jsx)(Q.a,{sx:{flexGrow:1,pt:2,pl:1},children:Object(B.jsx)(M.a,{sx:{display:"flex",justifyContent:"center"},container:!0,spacing:1,children:Object(B.jsx)($,{userData:e.userData,products:c})})}),Object(B.jsx)("button",{className:g.a.loadmore,onClick:function(){var e=d+P,t={skip:e,limit:P,loadmore:!0};console.log("loadmore:",t),T(t),j(e)},children:"more Cookies!"})]})]})},se=a(18),oe=a.n(se),ie=a(48),le=a(49),ue=function(){function e(){Object(ie.a)(this,e)}return Object(le.a)(e,[{key:"login",value:function(e){h.a.post("/api/users/login",e).then((function(e){console.log("[login]login res:",e),e.data.loginSuccess?(console.log(e.data.userId),window.localStorage.setItem("userId",e.data.userId),window.location.reload()):!1===e.data.loginSuccess?alert("\ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4."):alert("\ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},{key:"logout",value:function(){h.a.get("/api/users/logout").then((function(e){e.data.success?(console.log("logout succeded: ",e.data),window.localStorage.removeItem("userId"),window.location.reload()):alert("\ub85c\uadf8\uc544\uc6c3\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},{key:"register",value:function(e){h.a.post("/api/users/register",e).then((function(e){if(e.data.success)return console.log(e.data),e.data;alert("\ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}},{key:"addToCart",value:function(e){h.a.post("/api/users/addToCart",e).then((function(e){if(e.data)return console.log("[Auth]add to cart:",e.data),e.data;alert("\uc7a5\ubc14\uad6c\ub2c8\uc5d0 \ub123\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.")}))}},{key:"getUser",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/users/auth").then((function(e){if(console.log("[Auth]get userData:",e.data),e.data)return e.data;alert("fail to get userData")}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),de=ue,je=a(285),me=a(289),be=a(159),pe=a(291),ge=a(280),xe=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Boolean(c),o=new de;console.log("[Navbar]props:",e.userData);var l=function(){o.logout()},u=function(){r(null)};return Object(B.jsx)("div",{className:oe.a.nav,children:Object(B.jsxs)("section",{className:oe.a.navbar,children:[Object(B.jsx)(Z.b,{to:"/",children:Object(B.jsxs)("div",{className:oe.a.logo,children:[Object(B.jsx)("img",{alt:"logoimg",className:oe.a.logoimg,src:"/images/logoimg.gif"}),Object(B.jsx)("img",{alt:"mainlogo",className:oe.a.mainlogo,src:"/images/mainlogo.gif"})]})}),Object(B.jsx)("div",{className:oe.a.guide,children:e.userData.isAuth?Object(B.jsxs)("div",{className:oe.a.rightNav,children:[Object(B.jsx)("div",{children:Object(B.jsx)(Z.b,{to:"/upload",children:Object(B.jsx)("img",{alt:"upload",className:oe.a.navimg,src:"/images/upload.gif"})})}),Object(B.jsx)("div",{children:Object(B.jsx)(Z.b,{to:"/user/cart",children:e.userData.isAuth?Object(B.jsx)(je.a,{badgeContent:e.userData.cart.length,color:"error",children:Object(B.jsx)("img",{alt:"cart01",className:oe.a.navimgcart,src:"/images/cart.gif"})}):Object(B.jsx)(je.a,{badgeContent:0,color:"error",children:Object(B.jsx)("img",{alt:"cart02",className:oe.a.navimgcart,src:"/images/cart.gif"})})})}),Object(B.jsx)("div",{children:Object(B.jsx)(Z.b,{to:"/purchased",children:Object(B.jsx)("img",{alt:"history",className:oe.a.navhistory,src:"/images/history.gif"})})}),Object(B.jsx)("img",{alt:"logout",onClick:l,className:oe.a.navimg,src:"/images/logout.gif"})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Z.b,{to:"/login",children:Object(B.jsx)("img",{alt:"login",className:oe.a.navimg,src:"/images/signin.gif"})}),Object(B.jsx)(Z.b,{to:"/register",children:Object(B.jsx)("img",{alt:"register",className:oe.a.navimg,src:"/images/signup.gif"})})]})}),Object(B.jsx)("div",{className:oe.a.response,children:e.userData.isAuth?Object(B.jsxs)("div",{children:[Object(B.jsx)(me.a,{id:"fade-button","aria-controls":s?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:function(e){r(e.currentTarget)},sx:{background:"none",height:"30px"},children:Object(B.jsx)("img",{className:oe.a.menuimg,alt:"menu",src:"/images/menu.png"})}),Object(B.jsx)(J.a,{sx:{background:"#FFF6FF"},children:Object(B.jsxs)(be.a,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:c,open:s,onClose:u,TransitionComponent:ge.a,sx:{background:"none"},children:[Object(B.jsx)(pe.a,{sx:{background:"none"},onClick:u,children:Object(B.jsx)(Z.b,{to:"/upload",children:Object(B.jsx)("img",{alt:"upload",className:oe.a.navimg,src:"/images/upload.gif"})})}),Object(B.jsx)(pe.a,{sx:{background:"none"},onClick:u,children:Object(B.jsx)(Z.b,{to:"/user/cart",children:e.userData.isAuth?Object(B.jsx)(je.a,{badgeContent:e.userData.cart.length,color:"error",children:Object(B.jsx)("img",{alt:"cart01",className:oe.a.navimgcart,src:"/images/cart.gif"})}):Object(B.jsx)(je.a,{badgeContent:0,color:"error",children:Object(B.jsx)("img",{alt:"cart02",className:oe.a.navimgcart,src:"/images/cart.gif"})})})}),Object(B.jsx)(pe.a,{sx:{background:"none"},onClick:u,children:Object(B.jsx)(Z.b,{to:"/purchased",children:Object(B.jsx)("img",{alt:"history",className:oe.a.navhistory,src:"/images/history.gif"})})}),Object(B.jsx)(pe.a,{sx:{background:"none"},onClick:u,children:Object(B.jsx)("img",{alt:"logout",onClick:l,className:oe.a.navimg,src:"/images/logout.gif"})})]})})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Z.b,{to:"/login",children:Object(B.jsx)("img",{alt:"login",className:oe.a.navimg,src:"/images/signin.gif"})}),Object(B.jsx)(Z.b,{to:"/register",children:Object(B.jsx)("img",{alt:"register",className:oe.a.navimg,src:"/images/signup.gif"})})]})})]})})},he=function(e){return Object(B.jsx)("div",{className:oe.a.nav,children:Object(B.jsx)("section",{className:oe.a.navbar,children:Object(B.jsx)(Z.b,{to:"/",children:Object(B.jsxs)("div",{className:oe.a.logo,children:[Object(B.jsx)("img",{alt:"logoimg",className:oe.a.logoimg,src:"/images/logoimg.gif"}),Object(B.jsx)("img",{alt:"mainlogo",className:oe.a.mainlogo,src:"/images/mainlogo.gif"})]})})})})},Oe=a(16),fe=a(77),_e=a.n(fe),ve=a(66),ye=a(300),Ne=function(e){var t=new de,a=Object(n.useRef)(),c=Object(Oe.f)(),r=!!localStorage.getItem("loginUser"),s=Object(ve.b)({defaultValues:{email:"",password:""}}),o=s.control,i=s.handleSubmit;Object(n.useEffect)((function(){e.userData.isAuth&&c("/")}),[c,e.userData.isAuth]);var l=function(e){console.log("[login]submit data:",e),t.login(e),!0===r?window.localStorage.setItem("loginUser",e.id):localStorage.removeItem("loginUser"),a.current.reset(),c("/",{state:e})};return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("section",{className:_e.a.loginPage,children:Object(B.jsxs)("form",{ref:a,onSubmit:i(l),className:_e.a.loginform,children:[Object(B.jsx)("label",{children:"Email "}),Object(B.jsx)(ve.a,{render:function(e){var t=e.field;return Object(B.jsx)(ye.a,Object(m.a)({},t))},name:"email",control:o,defaultValue:""}),Object(B.jsx)("label",{children:"Password "}),Object(B.jsx)(ve.a,{render:function(e){var t=e.field;return Object(B.jsx)(ye.a,Object(m.a)(Object(m.a)({},t),{},{type:"password"}))},name:"password",control:o,defaultValue:""}),Object(B.jsx)("button",{className:_e.a.button,onSubmit:i(l),children:Object(B.jsx)("img",{alt:"signin",className:_e.a.submitBtn,src:"/images/signin.gif"})})]})})})},we=a(45),Ce=a.n(we),ke=function(e){console.log("[register]props:",e);var t=Object(ve.b)(),a=t.register,c=t.handleSubmit,r=t.watch,s=t.formState.errors,o=Object(n.useRef)(),i=Object(n.useRef)();i.current=r("password");var l=Object(Oe.f)(),u=new de;Object(n.useEffect)((function(){e.userData.isAuth&&l("/")}),[l,e.userData.isAuth]);return Object(B.jsx)("section",{className:Ce.a.registerPage,children:Object(B.jsxs)("form",{ref:o,onSubmit:c((function(e){console.log("data",e);var t={name:e.name,email:e.email,password:e.password};u.register(t),console.log("after register"),o.current.reset(),l("/login")})),className:Ce.a.registerform,children:[Object(B.jsxs)("section",{className:Ce.a.inputfield,children:[Object(B.jsx)("label",{children:"Email"}),Object(B.jsx)("input",Object(m.a)({type:"email",placeholder:"email"},a("email",{required:!0,pattern:/^\S+@\S+$/i}))),s.email&&Object(B.jsx)("p",{children:"This email field is required"})]}),Object(B.jsxs)("section",{className:Ce.a.inputfield,children:[Object(B.jsx)("label",{children:"Name"}),Object(B.jsx)("input",Object(m.a)({type:"text",placeholder:"name"},a("name",{required:!0,maxLength:10}))),s.name&&"required"===s.name.type&&Object(B.jsx)("p",{children:" This name field is required"}),s.name&&"maxLength"===s.name.type&&Object(B.jsx)("p",{children:" Your input exceed maximum length"})]}),Object(B.jsxs)("section",{className:Ce.a.inputfield,children:[Object(B.jsx)("label",{children:"Password"}),Object(B.jsx)("input",Object(m.a)({type:"password",placeholder:"password"},a("password",{required:!0,minLength:5}))),s.password&&"required"===s.password.type&&Object(B.jsx)("p",{children:" This name field is required"}),s.password&&"minLength"===s.password.type&&Object(B.jsx)("p",{children:" Password must have at least 5 characters"})]}),Object(B.jsxs)("section",{className:Ce.a.inputfield,children:[Object(B.jsx)("label",{children:"Password Confirm"}),Object(B.jsx)("input",Object(m.a)({type:"password",placeholder:"password confirm"},a("password_confirm",{required:!0,validate:function(e){return e===i.current}}))),s.password_confirm&&"required"===s.password_confirm.type&&Object(B.jsx)("p",{children:" This password confirm field is required"}),s.password_confirm&&"validate"===s.password_confirm.type&&Object(B.jsx)("p",{children:"The passwords do not match"})]}),Object(B.jsx)("div",{className:Ce.a.submit,children:Object(B.jsx)("img",{alt:"signup",className:Ce.a.submitBtn,src:"/images/signup.gif"})})]})})},Ie=a(40),Se=a.n(Ie),De=a(283),Pe=a(41),Te=a.n(Pe),Fe=a(160),qe=function(){function e(){Object(ie.a)(this,e)}return Object(le.a)(e,[{key:"upload",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t[0]),a.append("upload_preset","tnusuxtm"),n={headers:{"Content-Type":"multipart/form-data"}},e.next=6,h.a.post("https://api.cloudinary.com/v1_1/dj8b9wygu/image/upload",a,n).then((function(e){return console.log(e.data),e.data})).catch((function(e){return console.log(e)}));case 6:return c=e.sent,e.abrupt("return",c.url);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Be=new qe,Ee=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1],s=function(){var t=Object(o.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("files:",a),t.next=3,Be.upload(a);case 3:n=t.sent,r([].concat(Object(b.a)(c),[n])),e.refreshImages([].concat(Object(b.a)(c),[n]));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:Te.a.box,children:[Object(B.jsx)(Fe.a,{onDrop:s,children:function(e){var t=e.getRootProps,a=e.getInputProps;return Object(B.jsx)("section",{className:Te.a.imagesupload,children:Object(B.jsxs)("div",Object(m.a)(Object(m.a)({className:Te.a.dropzone},t()),{},{children:[Object(B.jsx)("input",Object(m.a)({},a())),Object(B.jsx)("span",{className:Te.a.dropzoneText,children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\ud558\uae30"}),Object(B.jsx)("br",{}),Object(B.jsxs)("span",{className:Te.a.dropzoneInfo,children:["(\uc5ec\ub7ec\uac1c \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4. ",Object(B.jsx)("br",{}),"\ubbf8\ub9ac\ubcf4\uae30\ub97c \uc2a4\ud06c\ub864\ud574\uc8fc\uc138\uc694.)"]})]}))})}}),Object(B.jsx)("section",{className:Te.a.showimages,children:c.length>0?c.map((function(t,a){return Object(B.jsx)("div",{className:Te.a.imgbox,onClick:function(){return function(t){var a=c.indexOf(t);console.log("currentIndex:",a);var n=Object(b.a)(c);console.log(n),n.splice(a,1),r(n),e.refreshImages(n)}(t)},children:Object(B.jsx)("img",{alt:a,className:Te.a.image,src:"".concat(t)})},a)})):Object(B.jsx)("div",{className:Te.a.empty,children:"\uc774\ubbf8\uc9c0\uac00 \uc5c6\uc5b4\uc694."})})]})},Ae=[{key:1,value:"\ub85c\ud22c\uc2a4\uc544\uba54\ub9ac\uce78"},{key:2,value:"\ub9d0\ucc28\ucfe0\ud0a4"},{key:3,value:"\ucd08\ucf54\uce69\ucfe0\ud0a4"},{key:4,value:"\ud074\ub798\uc2dd"},{key:5,value:"\ud53c\ub0ad\uc2dc\uc5d0"},{key:6,value:"\uae4c\ub20c\ub808"},{key:7,value:"\ub9c8\ub4e4\ub80c"}],Re=function(e){console.log("[uploadPage]props",e);var t=Object(Oe.f)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)(0),m=Object(i.a)(j,2),b=m[0],p=m[1],g=Object(n.useState)(1),x=Object(i.a)(g,2),O=x[0],f=x[1],_=Object(n.useState)([]),v=Object(i.a)(_,2),y=v[0],N=v[1],w=function(a){if(a.preventDefault(),!r||!u||!b||!O||!y)return alert("\ubaa8\ub4e0 \uac12\uc744 \ub123\uc5b4\uc8fc\uc138\uc694");var n={writer:e.userData._id,productname:r,description:u,price:b,cookies:O,images:y};console.log(n),h.a.post("/api/product",n).then((function(e){e.data.success?(console.log(e.data),alert("\uc0c1\ud488\uc744 \uc5c5\ub85c\ub4dc \ud588\uc2b5\ub2c8\ub2e4."),t("/")):alert("\uc0c1\ud488 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))};Object(n.useEffect)((function(){e.userData.isAuth||t("/")}),[t,e.userData.isAuth]);return Object(B.jsx)("div",{className:Se.a.upload,children:Object(B.jsxs)("section",{className:Se.a.uploadPage,children:[Object(B.jsx)("div",{className:Se.a.uploadtext,children:Object(B.jsx)(Y.a,{variant:"h5",sx:{pt:1,fontWeight:500,color:"#3B2E45"},children:"Products Upload"})}),Object(B.jsxs)("form",{className:Se.a.uploadform,onSubmit:w,children:[Object(B.jsx)("section",{className:Se.a.imagesUpload,children:Object(B.jsx)(Ee,{refreshImages:function(e){N(e)}})}),Object(B.jsxs)("section",{className:Se.a.inputfield,children:[Object(B.jsx)("span",{className:Se.a.inputTitle,children:"\uc0c1\ud488 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."}),Object(B.jsxs)(J.a,{sx:{display:"flex",flexDirection:"row",mt:4,ml:3},children:[Object(B.jsx)(Y.a,{variant:"body1",sx:{color:"#3B2E45"},children:"\uc774\ub984"}),Object(B.jsx)(ye.a,{sx:{ml:4.5,borderBottom:"1px solid #B178DE50"},onChange:function(e){s(e.currentTarget.value),console.log("product name changed:",e.currentTarget.value)},value:r})]}),Object(B.jsxs)(J.a,{sx:{display:"flex",flexDirection:"row",mt:4,ml:3},children:[Object(B.jsx)(Y.a,{sx:{color:"#3B2E45"},variant:"body1",children:"\uc124\uba85"}),Object(B.jsx)(De.a,{sx:{ml:4.5,width:"70%",border:"1px solid #B178DE50",borderRadius:"5px"},multiline:!0,rows:4,onChange:function(e){d(e.currentTarget.value),console.log("product name changed:",e.currentTarget.value)},value:u})]}),Object(B.jsxs)(J.a,{sx:{display:"flex",flexDirection:"row",mt:4,ml:3},children:[Object(B.jsx)(Y.a,{variant:"body1",sx:{color:"#3B2E45"},children:"\uac00\uaca9(\uc6d0)"}),Object(B.jsx)(ye.a,{sx:{ml:2,textAlign:"center",borderBottom:"1px solid #B178DE50"},type:"number",onChange:function(e){p(e.currentTarget.value),console.log("product name changed:",e.currentTarget.value)},value:b})]}),Object(B.jsxs)(J.a,{sx:{display:"flex",flexDirection:"row",mt:4,ml:3},children:[Object(B.jsx)(Y.a,{variant:"body1",sx:{color:"#3B2E45"},children:"\uc885\ub958"}),Object(B.jsx)("select",{className:Se.a.cookies,onChange:function(e){console.log(e.currentTarget.value),f(e.currentTarget.value)},value:O,children:Ae.map((function(e){return Object(B.jsx)("option",{value:e.key,children:e.value},e.key)}))})]}),Object(B.jsx)("button",{className:Se.a.submitBtn,type:"submit",onClick:w,children:"\uc5c5\ub85c\ub4dc"})]})]})]})})},Ue=a(69),Le=a.n(Ue),We=a(123),ze=a.n(We),Qe=function(e){var t=e.product,a=Object(n.useState)([]),c=Object(i.a)(a,2),r=c[0],s=c[1];console.log(t.images),Object(n.useEffect)((function(){queueMicrotask(Object(o.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.images;case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)}))))}),[t,r]);return Object(B.jsx)("section",{className:ze.a.imageSlider,children:Object(B.jsx)(ne.a,Object(m.a)(Object(m.a)({},{dots:!0,speed:500,arrows:!1,autoplay:!0,autoplaySpeed:2e3,slidesToShow:1,slidesToScroll:1}),{},{children:r?r.map((function(e,t){return Object(B.jsx)("div",{children:Object(B.jsx)("img",{className:ze.a.images,src:"".concat(e),alt:"carouselimg"})},t)})):""}))})},Me=a(302),Ve=a(306),Ke=a(305),Ge=a(301),Ye=a(303),Xe=a(304),He=a(297),Je=[{quantity:1},{quantity:2},{quantity:3},{quantity:4},{quantity:5},{quantity:10},{quantity:"\uc9c1\uc811\uc785\ub825"}],Ze=function(e){var t=e.product,a=e.addItemToCart,c=Object(n.useState)(),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(n.useState)(!1),u=Object(i.a)(l,2),d=u[0],j=u[1];console.log(t);return Object(B.jsxs)("section",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(B.jsx)(Ge.a,{component:He.a,children:Object(B.jsxs)(Me.a,{sx:{maxWidth:"100%"},children:[Object(B.jsx)(Ye.a,{sx:{backgroundColor:"#f0f0f0"},children:Object(B.jsxs)(Xe.a,{children:[Object(B.jsx)(Ke.a,{align:"center",sx:{fontWeight:600},children:"Product"}),Object(B.jsx)(Ke.a,{align:"center",sx:{fontWeight:600},children:"Infomation"})]})}),Object(B.jsxs)(Ve.a,{children:[Object(B.jsxs)(Xe.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(B.jsx)(Ke.a,{align:"center",component:"th",scope:"row",children:"Product Name"}),Object(B.jsx)(Ke.a,{align:"center",children:t.productname})]}),Object(B.jsxs)(Xe.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(B.jsx)(Ke.a,{align:"center",component:"th",scope:"row",children:"Sold"}),Object(B.jsx)(Ke.a,{align:"center",children:t.sold})]}),Object(B.jsxs)(Xe.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(B.jsx)(Ke.a,{align:"center",component:"th",scope:"row",children:"Price"}),Object(B.jsxs)(Ke.a,{align:"center",children:[t.price,"\uc6d0"]})]}),Object(B.jsxs)(Xe.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(B.jsx)(Ke.a,{align:"center",component:"th",scope:"row",children:"Description"}),Object(B.jsx)(Ke.a,{align:"center",children:t.description})]})]})]})}),Object(B.jsxs)(J.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mt:2,width:"100%",justifyContent:"space-evenly"},children:[d?Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{children:"\uc218\ub7c9"}),Object(B.jsx)("select",{style:{height:"28px",width:"100px",marginLeft:"10px"},onChange:function(e){return function(e){console.log(e)}(e.target.value)},value:s,children:Je.map((function(e,t){return Object(B.jsx)("option",{value:e.quantity,children:e.quantity},t)}))}),Object(B.jsx)("input",{style:{height:"25px",width:"70px",marginLeft:"10px",marginRight:"10px"},onChange:function(e){return t=e.target.value,void o(t);var t},type:"text"}),Object(B.jsx)("span",{children:"\uac1c"})]}):Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{children:"\uc218\ub7c9"}),Object(B.jsx)("select",{style:{height:"28px",width:"100px",marginLeft:"10px"},onChange:function(e){var t;"\uc9c1\uc811\uc785\ub825"===(t=e.target.value)?j(!0):(j(!1),console.log(t),o(t))},value:s,children:Je.map((function(e,t){return Object(B.jsx)("option",{value:e.quantity,children:e.quantity},t)}))}),Object(B.jsx)("input",{style:{height:"25px",width:"70px",marginLeft:"10px",marginRight:"10px"},disabled:!0,type:"text"}),Object(B.jsx)("span",{children:"\uac1c"})]}),Object(B.jsx)(me.a,{sx:{background:"#B178DE50",color:"#3B2E45"},onClick:function(){a(t._id,s)},children:"\uc7a5\ubc14\uad6c\ub2c8 \ub2f4\uae30"})]})]})},$e=a(100),et=a.n($e),tt=a(46),at=a.n(tt),nt=function(e){var t=e.user,a=e.productId,c=e.comment,r=e.refreshFunction,s=Object(n.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(n.useState)(""),j=Object(i.a)(d,2),m=j[0],b=j[1];console.log("[singleComment]user:",t),console.log("[singleComment]comment:",c);var p=Object(Oe.f)(),g=function(e){e.preventDefault(),t||(alert("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694"),p("/login"));var n={writer:t._id,productId:a,content:m,responseTo:c._id};h.a.post("/api/comment/saveComment",n).then((function(e){e.data.success?(console.log(e.data),r(e.data.comments),u(!1)):alert("\ucf54\uba58\ud2b8\ub97c \uc800\uc7a5\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.")})),b("")};return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("section",{className:at.a.commentSection,children:[t?Object(B.jsx)("span",{className:at.a.writer,children:t.name}):Object(B.jsx)("span",{className:at.a.writer,children:"null"}),Object(B.jsxs)("div",{className:at.a.commentContent,children:[Object(B.jsx)("span",{children:c.content}),Object(B.jsx)("span",{className:at.a.replyTo,onClick:function(){u(!l)},children:"Reply to"},"commentReplyTo"),l&&Object(B.jsxs)("form",{className:at.a.commentform,onSubmit:g,children:[Object(B.jsx)("textarea",{className:at.a.commentInput,onChange:function(e){b(e.currentTarget.value)},value:m,placeholder:"\uc758\uacac\uc744 \ub0a8\uaca8\uc8fc\uc138\uc694 :)"}),Object(B.jsx)("br",{}),Object(B.jsx)("button",{className:at.a.commentBtn,onClick:g,children:"Submit"})]})]})]})})},ct=a(101),rt=a.n(ct),st=function e(t){var a=t.comments,c=t.productId,r=t.parentCommentId,s=t.refreshFunction,o=Object(n.useState)(),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)(!1),m=Object(i.a)(j,2),b=m[0],p=m[1];console.log("[Reply]comments:",a),console.log("[Reply]productId",c),console.log("[Reply]parentCommentId",r),console.log("[Reply]refreshFunction",s),console.log("[Reply]commentCount",u),Object(n.useEffect)((function(){var e=0;a.map((function(t){return t.responseTo===r&&(e++,d(e)),e}))}),[a,r]);return Object(B.jsxs)("div",{children:[u>0&&Object(B.jsxs)("p",{className:rt.a.replycount,onClick:function(){console.log("open Reply",b),p(!b)},children:["View ",Object(B.jsx)("span",{className:rt.a.counts,children:u})," more comment(s)"]}),b&&function(t){return a.map((function(n,r){return n.responseTo?n.responseTo===t&&Object(B.jsxs)("div",{className:rt.a.replysection,children:[Object(B.jsx)(nt,{refreshFunction:s,comment:n,productId:c},r),Object(B.jsx)(e,{refreshFunction:s,parentCommentId:n._id,comments:a,productId:c},n._id)]}):""}))}(r)]})},ot=function(e){var t=e.user,a=e.comments,c=e.refreshFunction,r=e.productId,s=Object(n.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(Oe.f)();console.log("[Comment]comments:",a),console.log("[Comment]user",t),console.log("[Comment]productId",r);var j=function(e){e.preventDefault(),t||(alert("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694"),d("/login"));var a={writer:t._id,productId:r,content:l};h.a.post("/api/comment/saveComment",a).then((function(e){e.data.success?(c(e.data.success),console.log(e.data)):alert("\ucf54\uba58\ud2b8\ub97c \uc800\uc7a5\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.")})),u("")};return Object(B.jsxs)(B.Fragment,{children:[a&&a.map((function(e,s){return e.responseTo?"":Object(B.jsxs)(n.Fragment,{children:[Object(B.jsx)(nt,{refreshFunction:c,comment:e,productId:r,user:t},s),Object(B.jsx)(st,{user:t,refreshFunction:c,parentCommentId:e._id,comments:a,productId:r},Date.now())]},s)})),Object(B.jsxs)("form",{className:et.a.commentform,onSubmit:j,children:[Object(B.jsx)("textarea",{className:et.a.commentInput,onChange:function(e){u(e.currentTarget.value)},value:l,placeholder:"\uc758\uacac\uc744 \ub0a8\uaca8\uc8fc\uc138\uc694 :)"}),Object(B.jsx)("br",{}),Object(B.jsx)("button",{className:et.a.commentBtn,onClick:j,children:"Submit"})]})]})},it=function(e){var t=new de,a=Object(n.useState)({}),c=Object(i.a)(a,2),r=c[0],s=c[1],l=Object(Oe.g)().productId,d=Object(n.useState)([]),j=Object(i.a)(d,2),m=j[0],b=j[1],p=Object(Oe.f)(),g=Object(n.useCallback)(Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/product/product_by_id?id=".concat(l,"&type=single")).then((function(e){e.data.product?(console.log(e.data.product[0]),s(e.data.product[0])):alert("\uc0c1\ud488\uc815\ubcf4\ub97c \uac00\uc838\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.")}));case 2:case"end":return e.stop()}}),e)}))),[l]),x=Object(n.useCallback)(Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={productId:l},e.next=3,h.a.post("/api/comment/getComments",t).then((function(e){if(e.data.success)return console.log("[detail Page]get All Comments",e.data.comments),e.data.comments;console.log("\uc758\uacac\uc744 \ubd88\uc5b4\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.")}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[l]);return Object(n.useEffect)((function(){queueMicrotask(Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,x();case 3:t=e.sent,b(t);case 5:case"end":return e.stop()}}),e)}))))}),[s,x,g]),Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:Le.a.detailpage,children:[Object(B.jsx)("section",{className:Le.a.detail,children:Object(B.jsx)("h1",{children:r.productname})}),Object(B.jsx)("br",{}),Object(B.jsx)("section",{className:Le.a.productdetail,children:Object(B.jsx)(J.a,{sx:{width:"100%",display:"flex",margin:"auto"},children:Object(B.jsxs)(M.a,{container:!0,spacing:3,justifyContent:"center",children:[Object(B.jsx)(M.a,{item:!0,xs:12,md:6,lg:6,children:Object(B.jsx)(Qe,{product:r})}),Object(B.jsx)(M.a,{item:!0,xs:12,md:6,lg:6,children:Object(B.jsx)(Ze,{product:r,addItemToCart:function(e,a){console.log("add to cart:",e),console.log("add to cart:",a);var n={productId:e,quantities:a},c=t.addToCart(n);console.log("[Detail Page]add to cart:",c),p("/user/cart",{state:c})}})})]})})}),Object(B.jsxs)("div",{className:Le.a.comment,children:[Object(B.jsx)("p",{className:Le.a.comments,children:"Comments"}),Object(B.jsx)("hr",{}),Object(B.jsx)(ot,{user:e.userData,productId:l,refreshFunction:function(e){b(m.concat(e))},comments:m})]})]})})},lt=a(70),ut=a.n(lt),dt=a(24),jt=a.n(dt),mt=function(e){var t=e.products,a=e.removeProduct;console.log("[userCartData]products",t);var n=function(e){if(e.length>0){var t=e[0];return"".concat(t)}},c=t.length>0&&t.map((function(e,t){return Object(B.jsxs)("tr",{className:jt.a.detailtable,children:[Object(B.jsxs)("td",{className:jt.a.productInfo,children:[Object(B.jsx)("img",{className:jt.a.cartimage,alt:"product",src:n(e.images)}),Object(B.jsxs)("div",{className:jt.a.productDetail,children:[Object(B.jsx)("span",{className:jt.a.productname,children:e.productname}),Object(B.jsx)("span",{className:jt.a.description,children:e.description}),Object(B.jsxs)("span",{className:jt.a.price,children:[e.price,"\uc6d0"]})]})]}),Object(B.jsxs)("td",{className:jt.a.bodyquantity,children:[e.quantity," \uac1c"]}),Object(B.jsxs)("td",{className:jt.a.bodyprice,children:[e.quantity*e.price,"\uc6d0"]}),Object(B.jsx)("td",{className:jt.a.bodyremove,children:Object(B.jsx)(me.a,{className:jt.a.removeBtn,onClick:function(){return a(e._id)},children:"Remove"},e.id)})]},t)}));return Object(B.jsx)("div",{className:jt.a.userCards,children:Object(B.jsxs)("table",{children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{className:jt.a.tablehead,children:[Object(B.jsx)("th",{className:jt.a.headname,children:"\uc0c1\ud488\uc815\ubcf4"}),Object(B.jsx)("th",{className:jt.a.headquantity,children:"\uc218\ub7c9"}),Object(B.jsx)("th",{className:jt.a.headprice,children:"\uac00\uaca9"}),Object(B.jsx)("th",{className:jt.a.headremove,children:"\uc7a5\ubc14\uad6c\ub2c8\uc5d0\uc11c \uc0ad\uc81c\ud558\uae30"})]})}),Object(B.jsx)("tbody",{children:c})]})})},bt=a(282),pt=a(158),gt=a.n(pt),xt=a(155),ht=a(161),Ot=a(156),ft=a.n(Ot),_t=function(e){Object(xt.a)(a,e);var t=Object(ht.a)(a);function a(){return Object(ie.a)(this,a),t.apply(this,arguments)}return Object(le.a)(a,[{key:"render",value:function(){var e=this,t=this.props.total;return Object(B.jsx)(ft.a,{env:"sandbox",client:{sandbox:"Adi__coHvRdTRFx3DQIg5LfFBqNYBc9o9XPcwz1krBkLAXvFtEsB_Pbh-phNDx5AQ8HiVXHSAd7mMNc9",production:"YOUR-PRODUCT-APP-ID"},currency:"USD",total:t,onError:function(e){console.log("Error!",e)},onSuccess:function(t){console.log("The payment was succeeded!",t),e.props.onSuccess(t)},onCancel:function(e){console.log("The payment was cancelled!",e)}})}}]),a}(c.a.Component),vt=a(157),yt=a.n(vt),Nt=function(e){console.log("[cartPage]props",e);var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(0),l=Object(i.a)(s,2),d=l[0],j=l[1],m=Object(n.useState)(!1),b=Object(i.a)(m,2),p=b[0],g=b[1],x=Object(n.useState)(!1),O=Object(i.a)(x,2),f=O[0],_=O[1],v=e.userData,y=Object(n.useCallback)(function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/product/product_by_id?id=".concat(t,"&type=array")).then((function(e){return v.cart.forEach((function(t){e.data.product.forEach((function(a,n){t.id===a._id&&(e.data.product[n].quantity=t.quantity)}))})),e.data}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v.cart]),N=Object(n.useCallback)(function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:return a=e.sent,console.log(a.product),e.abrupt("return",a.product);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y]),w=Object(n.useCallback)((function(){var e=0;c.length>0&&c.map((function(t){return e+=parseInt(t.price,10)*t.quantity})),j(e),_(!0)}),[c]),C=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/users/removeFromCart?id=".concat(t)).then((function(e){return e.data.cart&&e.data.cart.forEach((function(t){e.data.productInfo.forEach((function(a,n){t.id===a._id&&(e.data.productInfo[n].quantity=t.quantity)}))})),e.data}));case 2:a=e.sent,console.log(a),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(n.useCallback)(Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!v||!v.cart){e.next=12;break}if(!(v.cart.length>0)){e.next=11;break}return v.cart.forEach((function(e){t.push(e.id)})),e.next=6,N(t);case 6:a=e.sent,console.log(a),r(a),e.next=12;break;case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e)}))),[v,N]);return Object(n.useEffect)((function(){k()}),[r,v,k]),Object(n.useEffect)((function(){w()}),[c,w]),Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("section",{className:ut.a.cartpage,children:[Object(B.jsx)("div",{className:ut.a.carttext,children:Object(B.jsx)(Y.a,{variant:"h5",sx:{pt:1,fontWeight:500,color:"#3B2E45"},children:"\uc7a5\ubc14\uad6c\ub2c8"})}),Object(B.jsx)(mt,{products:c,removeProduct:C}),0!==d&&f?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(bt.a,{sx:{mt:4}}),Object(B.jsxs)("div",{className:ut.a.total,children:[Object(B.jsxs)(Y.a,{variant:"h6",children:["\ucd1d \uc8fc\ubb38\uae08\uc561: ",d,"\uc6d0"]}),Object(B.jsx)("div",{className:ut.a.payment,children:0!==d&&Object(B.jsx)(_t,{total:d,onSuccess:function(e){var t={paymentData:e,cartData:c};h.a.post("/api/users/successBuy",t).then((function(e){e.data.success?(console.log("[cart]purchased items:",e.data.cartData),g(!0),r(e.data.cartData)):alert("\uacb0\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}})})]}),Object(B.jsx)(bt.a,{})]}):p?Object(B.jsxs)(Q.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mt:3},children:[Object(B.jsx)(yt.a,{sx:{fontSize:"100px",color:"green"}}),Object(B.jsx)(Y.a,{variant:"h5",children:"Your Purchase was successful!"})]}):Object(B.jsxs)("div",{className:ut.a.emptycart,children:[Object(B.jsx)(gt.a,{sx:{fontSize:"100px",mt:3,color:"#ddd"}}),Object(B.jsx)(Y.a,{variant:"body1",sx:{color:"gray",mt:1},children:"No Items In Your Cart"})]})]})})},wt=a(71),Ct=a.n(wt),kt=function(e){var t=e.userData;console.log("[Purchased Pages]userData:",t);var a=Object(Oe.f)(),c=t.history.length>0&&t.history.map((function(e,t){var a=new Date(e.dataOfPurchase);console.log(a);var n=a.toLocaleString();return console.log(n),Object(B.jsxs)("tr",{className:Ct.a.detailInfo,children:[Object(B.jsx)("td",{children:e.name}),Object(B.jsxs)("td",{children:[e.price,"\uc6d0"]}),Object(B.jsx)("td",{children:e.quantity}),Object(B.jsx)("td",{children:n})]},t)}));return Object(n.useEffect)((function(){t.isAuth||a("/")}),[a,t.isAuth]),Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:Ct.a.purchased,children:[Object(B.jsx)("div",{className:Ct.a.purchasedtext,children:Object(B.jsx)(Y.a,{variant:"h5",sx:{pt:1,fontWeight:500,color:"#3B2E45"},children:"\uad6c\ub9e4\ub0b4\uc5ed"})}),Object(B.jsx)("br",{}),Object(B.jsxs)("table",{className:Ct.a.tablebody,children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"Product"}),Object(B.jsx)("th",{children:"Price"}),Object(B.jsx)("th",{children:"Quantity"}),Object(B.jsx)("th",{children:"Date of Purchase"})]})}),Object(B.jsx)("tbody",{children:c})]}),0===t.history.length&&Object(B.jsx)("div",{className:Ct.a.emptycart,children:Object(B.jsx)(Y.a,{variant:"body1",sx:{color:"gray",mt:1},children:"No Purchased History"})})]})})};var It=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],r=new de;return Object(n.useEffect)((function(){queueMicrotask(Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getUser();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))))}),[c]),Object(B.jsxs)(B.Fragment,{children:[a?Object(B.jsx)(xe,{userData:a}):Object(B.jsx)(he,{}),Object(B.jsx)("section",{className:j.a.app,children:Object(B.jsxs)(Oe.c,{children:[Object(B.jsx)(Oe.a,{path:"/",element:Object(B.jsx)(re,{userData:a})}),Object(B.jsx)(Oe.a,{path:"/login",element:Object(B.jsx)(Ne,{userData:a})}),Object(B.jsx)(Oe.a,{path:"/register",element:Object(B.jsx)(ke,{userData:a})}),Object(B.jsx)(Oe.a,{path:"/upload",element:Object(B.jsx)(Re,{userData:a})}),Object(B.jsx)(Oe.a,{path:"/user/cart",element:Object(B.jsx)(Nt,{userData:a})}),Object(B.jsx)(Oe.a,{path:"/product/:productId",element:Object(B.jsx)(it,{userData:a})}),Object(B.jsx)(Oe.a,{path:"/purchased",element:Object(B.jsx)(kt,{userData:a})})]})})]})};s.a.render(Object(B.jsx)(Z.a,{children:Object(B.jsx)(It,{})}),document.getElementById("root"))},24:function(e,t,a){e.exports={userCards:"userCards_userCards__11GSA",tablehead:"userCards_tablehead__1Km5q",headname:"userCards_headname__3TjW8",headquantity:"userCards_headquantity__3Itil",headprice:"userCards_headprice__3eeMK",headremove:"userCards_headremove__1bnlT",cartimage:"userCards_cartimage__soy8x",detailtable:"userCards_detailtable__3MNNA",productInfo:"userCards_productInfo__5xreo",productDetail:"userCards_productDetail__1YrKF",productname:"userCards_productname__24PFV",description:"userCards_description__2NZ-R",price:"userCards_price__38QF6",bodyquantity:"userCards_bodyquantity__2my25",bodyprice:"userCards_bodyprice__2tFvQ",bodyremove:"userCards_bodyremove__2CaqH"}},40:function(e,t,a){e.exports={upload:"uploadPage_upload__3NZhj",imagesUpload:"uploadPage_imagesUpload__1kUDs",uploadtext:"uploadPage_uploadtext__JEV4i",uploadPage:"uploadPage_uploadPage__UbKUR",cookies:"uploadPage_cookies__3PKWy",uploadform:"uploadPage_uploadform__3pmAG",submitBtn:"uploadPage_submitBtn__24GAP",inputfield:"uploadPage_inputfield__36PPt",inputTitle:"uploadPage_inputTitle__3AcHA"}},41:function(e,t,a){e.exports={dropzone:"ImageUpload_dropzone__3rirl",dropzoneText:"ImageUpload_dropzoneText__2IbSO",dropzoneInfo:"ImageUpload_dropzoneInfo__1Vx8x",box:"ImageUpload_box__3S_oO",imagesupload:"ImageUpload_imagesupload__GbApT",showimages:"ImageUpload_showimages__3IXSg",image:"ImageUpload_image__1trqh",empty:"ImageUpload_empty__GtIQY"}},45:function(e,t,a){e.exports={registerPage:"register_registerPage__aqslb",registerform:"register_registerform__2AYOF",inputfield:"register_inputfield__39ngO",submit:"register_submit__33lOF",submitBtn:"register_submitBtn__x9qeK"}},46:function(e,t,a){e.exports={commentform:"singleComment_commentform__1gOQf",commentInput:"singleComment_commentInput__1FGiN",commentBtn:"singleComment_commentBtn__3XO4V",commentSection:"singleComment_commentSection__3wJZA",writer:"singleComment_writer__2cufY",commentContent:"singleComment_commentContent__36pQQ",likedislikeReply:"singleComment_likedislikeReply__9mLZF",replyTo:"singleComment_replyTo__2r660"}},68:function(e,t,a){e.exports={landingpage:"landingpage_landingpage__3Ds5E",title:"landingpage_title__12Mxl",loadmore:"landingpage_loadmore__Kt0yI",searchInput:"landingpage_searchInput__1lQIW",mainImages:"landingpage_mainImages__17Ahb"}},69:function(e,t,a){e.exports={detailpage:"detailPage_detailpage__24mAN",detail:"detailPage_detail__3Bslt",productdetail:"detailPage_productdetail__1iVml",comment:"detailPage_comment__DGwm1",comments:"detailPage_comments__1SQAs"}},70:function(e,t,a){e.exports={cartpage:"cartPage_cartpage__2WnWu",total:"cartPage_total__35hXf",emptycart:"cartPage_emptycart__3tIXV",payment:"cartPage_payment__1JHR1",carttext:"cartPage_carttext__2Tl72"}},71:function(e,t,a){e.exports={purchased:"purchased_purchased__1epPS",table:"purchased_table__3vkjs",tablebody:"purchased_tablebody__brbd_",purchasedtext:"purchased_purchasedtext__30dJG",detailInfo:"purchased_detailInfo__NNsyo"}},77:function(e,t,a){e.exports={loginform:"login_loginform__3B2Ob",loginPage:"login_loginPage__2G3hO",button:"login_button__PSKeL",submitBtn:"login_submitBtn__3rW8v"}}},[[224,1,2]]]);
//# sourceMappingURL=main.392aec1f.chunk.js.map